var JTracker={};JTracker.preview=function(c,b){var a=$(b);a.html("Loading preview...");$.post("/preview",{text:$(c).val()},function(d){a.empty();if(d.error){a.html(d.error)}else{if(!d.data.length){a.html("Invalid response.")}else{a.html(d.data)}}})};JTracker.submitComment=function(f,c,e,d){var b=$(e);var a=$(c);a.html("Submitting comment...");$.post("/submit/comment",{text:$("#comment").val(),issue_number:f},function(g){if(!g.data){a.html("Invalid response.")}else{if(g.error){a.html(g.error)}else{a.html(g.message);b.html(b.html()+tmpl(d,g.data))}}})};JTracker.submitVote=function(e,d){var b=$(d);var a=$("input[name=importanceRadios]").filter(":checked").val();var c=$("input[name=experiencedRadios]").filter(":checked").val();b.addClass("disabled").removeAttr("href").removeAttr("onclick").html("Adding vote...");$.post("/submit/vote",{issue_number:e,experienced:c,importance:a},function(f){if(f.error){b.addClass("btn-danger").removeClass("btn-success").html(f.error)}else{b.html(f.message);if(f.data.votes>1){$("td[id=votes]").html(f.data.votes);$("td[id=experienced]").html(f.data.experienced);$("td[id=importance]").html(f.data.importanceScore)}}})};