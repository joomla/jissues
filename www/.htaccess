##
# @package   JTracker
# @copyright (C) 2012-2014 Open Source Matters, Inc.  All Rights Reserved.
##

###########################################
# ======= Enable the Rewrite Engine =======

RewriteEngine On

###########################################


###########################################
# ======== Remove multiple slashes ========

RewriteCond %{HTTP_HOST} !=""
RewriteCond %{THE_REQUEST} ^[A-Z]+\s//+(.*)\sHTTP/[0-9.]+$ [OR]
RewriteCond %{THE_REQUEST} ^[A-Z]+\s(.*/)/+\sHTTP/[0-9.]+$
RewriteRule .* http://%{HTTP_HOST}/%1 [R=301,L]

###########################################


###########################################
# =========== Redirect old URIs ===========

RewriteRule ^/?tracker/joomla-cms-3-issues$ /tracker/joomla-cms [R=301,L]
RewriteRule ^/?tracker/joomla-cms-3-issues/(.*)$ /tracker/joomla-cms/$1 [R=301,L]
RewriteRule ^/?tracker/jtracker-bugs$ /tracker/jtracker [R=301,L]
RewriteRule ^/?tracker/jtracker-bugs/(.*)$ /tracker/jtracker/$1 [R=301,L]

###########################################


###########################################
# ======== Redirect HTTP to HTTPS =========

RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^issues.joomla.org
RewriteRule ^(.*)$ https://issues.joomla.org/$1 [R=301,L,QSA]

###########################################


###########################################
# ============ SEF URL Routing ============

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.php

###########################################
